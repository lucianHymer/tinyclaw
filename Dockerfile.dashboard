FROM node:22-slim

WORKDIR /app

# Install dependencies
COPY package*.json tsconfig.json ./
RUN npm ci

# Build TypeScript
COPY src/ src/
RUN npm run build && npm prune --production

# Copy static files
COPY static/ static/

EXPOSE 3100

CMD ["node", "dist/dashboard.js"]
