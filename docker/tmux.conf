# Borg dev container tmux configuration
# System-wide: /etc/tmux.conf

# Fix display on reattach (resize to new client, then refresh)
set-hook -g client-attached 'resize-window -A'
setw -g aggressive-resize on

# Full mouse support (tmux 3.4 on Ubuntu 24.04)
set -g mouse on

# Right-click / Shift+right-click context menu (simplified for non-tmux users)
unbind -n MouseDown3Pane
bind -n MouseDown3Pane {
    if -Ft= "#{mouse_any_flag}" {
        select-pane -t=
        send -M
    } {
        display-menu -T "#[align=centre] Actions " -t= -xM -yM \
            "Split Right"      h  "split-window -h -c '#{pane_current_path}'" \
            "Split Below"      v  "split-window -v -c '#{pane_current_path}'" \
            ""                                                                 \
            "Full Screen"      z  "resize-pane -Z"                             \
            ""                                                                 \
            "Detach"           d  "detach-client"                              \
            "Close Pane"       x  "kill-pane"
    }
}
bind -n S-MouseDown3Pane {
    display-menu -T "#[align=centre] Actions " -t= -xM -yM \
        "Split Right"      h  "split-window -h -c '#{pane_current_path}'" \
        "Split Below"      v  "split-window -v -c '#{pane_current_path}'" \
        ""                                                                 \
        "Full Screen"      z  "resize-pane -Z"                             \
        ""                                                                 \
        "Detach"           d  "detach-client"                              \
        "Close Pane"       x  "kill-pane"
}

# Sane defaults
set -g history-limit 50000
set -sg escape-time 10             # No lag after pressing Escape
set -g focus-events on
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
set -g status-style 'bg=#1a1a2e fg=#e0e0e0'
set -g status-left '#[fg=#00d4ff] dev #[default]| '
set -g status-right '%H:%M'
set -g status-left-length 30
